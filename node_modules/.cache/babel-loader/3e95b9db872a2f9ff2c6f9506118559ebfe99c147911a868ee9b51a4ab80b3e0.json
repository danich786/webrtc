{"ast":null,"code":"import _objectSpread from\"/Users/Dani/Desktop/webrtc/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/Dani/Desktop/webrtc/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/Dani/Desktop/webrtc/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/Dani/Desktop/webrtc/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/Dani/Desktop/webrtc/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Video=/*#__PURE__*/function(_Component){_inherits(Video,_Component);var _super=_createSuper(Video);function Video(props){var _this;_classCallCheck(this,Video);_this=_super.call(this,props);_this.mutemic=function(e){var stream=_this.video.srcObject.getTracks().filter(function(track){return track.kind==='audio';});_this.setState(function(prevState){if(stream)stream[0].enabled=!prevState.mic;return{mic:!prevState.mic};});};_this.mutecamera=function(e){var stream=_this.video.srcObject.getTracks().filter(function(track){return track.kind==='video';});_this.setState(function(prevState){if(stream)stream[0].enabled=!prevState.camera;return{camera:!prevState.camera};});};_this.state={mic:true,camera:true};return _this;}_createClass(Video,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.videoStream){this.video.srcObject=this.props.videoStream;}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){console.log(nextProps.videoStream);if(nextProps.videoStream&&nextProps.videoStream!==this.props.videoStream){this.video.srcObject=nextProps.videoStream;}}},{key:\"render\",value:function render(){var _this2=this;var muteControls=this.props.showMuteControls&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{onClick:this.mutemic,style:{cursor:'pointer',padding:5,fontSize:20,color:this.state.mic&&'white'||'red'},class:\"material-icons\",children:this.state.mic&&'mic'||'mic_off'}),/*#__PURE__*/_jsx(\"i\",{onClick:this.mutecamera,style:{cursor:'pointer',padding:5,fontSize:20,color:this.state.camera&&'white'||'red'},class:\"material-icons\",children:this.state.camera&&'videocam'||'videocam_off'})]});return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread({},this.props.frameStyle),children:[/*#__PURE__*/_jsx(\"video\",{id:this.props.id,muted:this.props.muted,autoPlay:true,style:_objectSpread({},this.props.videoStyles)// ref={ this.props.videoRef }\n,ref:function ref(_ref){_this2.video=_ref;}}),muteControls]});}}]);return Video;}(Component);export default Video;","map":{"version":3,"names":["React","Component","jsx","_jsx","jsxs","_jsxs","Video","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","mutemic","e","stream","video","srcObject","getTracks","filter","track","kind","setState","prevState","enabled","mic","mutecamera","camera","state","_createClass","key","value","componentDidMount","videoStream","componentWillReceiveProps","nextProps","console","log","render","_this2","muteControls","showMuteControls","children","onClick","style","cursor","padding","fontSize","color","class","_objectSpread","frameStyle","id","muted","autoPlay","videoStyles","ref"],"sources":["/Users/Dani/Desktop/webrtc/src/components/video.js"],"sourcesContent":["import React, { Component } from 'react';\n\nclass Video extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      mic: true,\n      camera: true,\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.videoStream) {\n      this.video.srcObject = this.props.videoStream\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    console.log(nextProps.videoStream)\n\n    if (nextProps.videoStream && nextProps.videoStream !== this.props.videoStream) {\n      this.video.srcObject = nextProps.videoStream\n    }\n  }\n\n  mutemic = (e) => {\n    const stream = this.video.srcObject.getTracks().filter(track => track.kind === 'audio')\n    this.setState(prevState => {\n      if (stream) stream[0].enabled = !prevState.mic\n      return {mic: !prevState.mic}\n    })\n  }\n\n  mutecamera = (e) => {\n    const stream = this.video.srcObject.getTracks().filter(track => track.kind === 'video')\n    this.setState(prevState => {\n      if (stream) stream[0].enabled = !prevState.camera\n      return {camera: !prevState.camera}\n    })\n  }\n\n  render() {\n    const muteControls = this.props.showMuteControls && (\n        <div>\n          <i onClick={this.mutemic} style={{ cursor: 'pointer', padding: 5, fontSize: 20, color: this.state.mic && 'white' || 'red' }} class='material-icons'>{this.state.mic && 'mic' || 'mic_off'}</i>\n          <i onClick={this.mutecamera} style={{ cursor: 'pointer', padding: 5, fontSize: 20, color: this.state.camera && 'white' || 'red' }} class='material-icons'>{this.state.camera && 'videocam' || 'videocam_off'}</i>\n        </div>\n    )\n    return (\n        <div\n            style={{ ...this.props.frameStyle }}\n        >\n          {/* <audio id={this.props.id} muted={this.props.muted} ref={ (ref) => {this.video = ref }}></audio> */}\n          <video\n              id={this.props.id}\n              muted={this.props.muted}\n              autoPlay\n              style={{ ...this.props.videoStyles }}\n              // ref={ this.props.videoRef }\n              ref={ (ref) => {this.video = ref }}\n          ></video>\n          {muteControls}\n        </div>\n    )\n  }\n}\n\nexport default Video\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}